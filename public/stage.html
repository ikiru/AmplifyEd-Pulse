<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AmplifyEd Pulse | Stage View</title>
  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/stage.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="stage-shell">
    <header class="stage-header">
      <div class="stage-title">AmplifyEd Pulse | Stage View</div>
      <div class="status-pill">
        <span class="status-dot"></span>
        <span id="stage-participant-count">0 participants</span>
      </div>
    </header>

    <section class="session-banner">
      <div>
        <p class="panel-label">Session Code</p>
        <h2 id="session-code-display" class="session-code">Generating...</h2>
      </div>
      <p class="session-hint">Share this code with the audience so they can join the session.</p>
    </section>

    <div class="stage-main">
      <section class="stage-panel">
        <div class="stage-header">
          <h2>Video</h2>
          <div class="view-toggle">
            <button id="btn-show-camera" class="toggle-btn active">Camera</button>
            <button id="btn-show-slides" class="toggle-btn">Slides</button>
          </div>
        </div>

        <div id="stage-video-inner" class="camera-mode">
          <div class="camera-view">
            <video id="stage-camera" autoplay playsinline muted></video>
            <div id="camera-status" class="camera-status">Unable to access camera.</div>
          </div>

          <div class="slides-view">
            <div class="slides-controls">
              <span id="slides-indicator">No deck connected</span>
            </div>
            <div class="slides-body">
              <iframe
                id="slides-iframe"
                class="slides-iframe"
                src=""
                frameborder="0"
                allowfullscreen
              ></iframe>
              <div id="slides-placeholder" class="slides-placeholder">
                Connect a slide deck from Backstage to show it here.
              </div>
            </div>
          </div>
        </div>

        <div class="stage-focus">
          <div class="focus-title">Stage focus</div>
          <p id="stage-focus-text" class="focus-text">
            No focus set yet. Update the focus text from Backstage to announce what the audience should pay attention to.
          </p>
        </div>
      </section>

      <section class="stage-discussion-panel">
        <div class="panel-label">Live discussion</div>
        <div id="stage-discussion-feed" class="discussion-feed"></div>
        <div id="stage-discussion-list" class="discussion-list"></div>
      </section>
    </div>

    <section class="stage-pulse">
      <div class="pulse-heading">
        <span>Live engagement pulse</span>
      </div>
      <div class="pulse-chart-wrapper">
        <canvas id="stage-pulse-chart"></canvas>
      </div>
      <div class="control-bar">
        <div class="control-left">
          <span id="stage-pulse-value" class="pulse-value">
            Current pulse: 0.00
          </span>
        </div>
        <div class="control-right">
          <span><span class="legend-dot positive"></span> Positive</span>
          <span><span class="legend-dot neutral"></span> Neutral</span>
          <span><span class="legend-dot negative"></span> Negative</span>
        </div>
      </div>
    </section>
  </div>

  <script src="/stage.js" type="module"></script>
</body>

</html>
